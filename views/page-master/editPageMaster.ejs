<div class="card h-100 p-0 radius-12">
    <div class="card-body p-24">
        <div class="row justify-content-center">
            <div class="col-xxl-6 col-xl-8 col-lg-10">
                <div class="card border">
                    <div class="card-body">
                        <form id="editPageForm">
                            <input type="hidden" id="pageId" value="<%= page._id %>">

                            <div class="mb-20">
                                <label for="name" class="form-label fw-semibold text-primary-light text-sm mb-8">Page Name <span class="text-danger-600">*</span></label>
                                <input type="text" class="form-control radius-8" id="name" name="name" value="<%= page.name %>" placeholder="Enter Page Name" required>
                            </div>
                            <div class="mb-20">
                                <label for="path" class="form-label fw-semibold text-primary-light text-sm mb-8">Path <span class="text-danger-600">*</span></label>
                                <input type="text" class="form-control radius-8" id="path" name="path" value="<%= page.path %>" placeholder="e.g., /about or /services" required>
                            </div>
                            <div class="mb-20">
                                <label for="status" class="form-label fw-semibold text-primary-light text-sm mb-8">Status</label>
                                <select class="form-control radius-8" id="status" name="status">
                                    <option value="active" <%= page.status === 'active' ? 'selected' : '' %>>Active</option>
                                    <option value="inactive" <%= page.status === 'inactive' ? 'selected' : '' %>>Inactive</option>
                                </select>
                            </div>
                            <!-- <div class="mb-20">
                                <label for="metaTitle" class="form-label fw-semibold text-primary-light text-sm mb-8">Meta Title</label>
                                <input type="text" class="form-control radius-8" id="metaTitle" name="metaTitle" value="<%= page.metaTitle || '' %>" placeholder="Enter Meta Title for SEO">
                            </div>
                            <div class="mb-20">
                                <label for="metaDescription" class="form-label fw-semibold text-primary-light text-sm mb-8">Meta Description</label>
                                <textarea class="form-control radius-8" id="metaDescription" name="metaDescription" rows="3" placeholder="Enter Meta Description for SEO"><%= page.metaDescription || '' %></textarea>
                            </div> -->
                            <div class="d-flex align-items-center justify-content-center gap-3">
                                <a href="/page-master/web-page-master" class="border border-danger-600 bg-hover-danger-200 text-danger-600 text-md px-56 py-11 radius-8">
                                    Cancel
                                </a>
                                <button type="submit" class="btn btn-primary border border-primary-600 text-md px-56 py-12 radius-8">
                                    Update
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<% script = `
<script>
    $(document).ready(function() {
        // Handle form submission
        $('#editPageForm').on('submit', function(e) {
            e.preventDefault();

            const pageId = $('#pageId').val();
            const formData = {
                name: $('#name').val(),
                path: $('#path').val(),
                status: $('#status').val(),
                metaTitle: $('#metaTitle').val(),
                metaDescription: $('#metaDescription').val()
            };

            $.ajax({
                url: '/api/pages/' + pageId,
                type: 'PUT',
                contentType: 'application/json',
                data: JSON.stringify(formData),
                success: function(response) {
                    if (response.success) {
                        showToast('Page updated successfully!', 'success');
                        setTimeout(function() {
                            window.location.href = '/page-master/web-page-master';
                        }, 1000);
                    } else {
                        showToast('Error: ' + response.message, 'error');
                    }
                },
                error: function(xhr) {
                    showToast('Error updating page: ' + (xhr.responseJSON?.message || 'Unknown error'), 'error');
                }
            });
        });
    });
</script>
` %>
