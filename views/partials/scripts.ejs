<!-- jQuery library js -->
<script src="/js/lib/jquery-3.7.1.min.js"></script>
<!-- Bootstrap js -->
<script src="/js/lib/bootstrap.bundle.min.js"></script>
<!-- Apex Chart js -->
<script src="/js/lib/apexcharts.min.js"></script>
<!-- Data Table js -->
<script src="/js/lib/dataTables.min.js"></script>
<!-- Iconify Font js -->
<script src="/js/lib/iconify-icon.min.js"></script>
<!-- jQuery UI js -->
<script src="/js/lib/jquery-ui.min.js"></script>
<!-- Vector Map js -->
<script src="/js/lib/jquery-jvectormap-2.0.5.min.js"></script>
<script src="/js/lib/jquery-jvectormap-world-mill-en.js"></script>
<!-- Popup js -->
<script src="/js/lib/magnifc-popup.min.js"></script>
<!-- Slick Slider js -->
<script src="/js/lib/slick.min.js"></script>
<!-- prism js -->
<script src="/js/lib/prism.js"></script>
<!-- file upload js -->
<script src="/js/lib/file-upload.js"></script>
<!-- audioplayer -->
<script src="/js/lib/audioplayer.js"></script>
<!-- Toastify JS -->
<script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
<!-- SweetAlert2 JS -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<!-- main js -->
<script src="/js/app.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.2/Sortable.min.js"></script>
<script src="/js/menu-js.js"></script>

<!-- Global Toast Notification Function -->
<script>
// Toast notification function
function showToast(message, type = 'success') {
    const colors = {
        success: 'linear-gradient(to right, #00b09b, #96c93d)',
        error: 'linear-gradient(to right, #ff5f6d, #ffc371)',
        warning: 'linear-gradient(to right, #f7971e, #ffd200)',
        info: 'linear-gradient(to right, #4facfe, #00f2fe)'
    };

    Toastify({
        text: message,
        duration: 3000,
        gravity: "top",
        position: "right",
        stopOnFocus: true,
        style: {
            background: colors[type] || colors.success,
        },
        onClick: function(){} // Callback after click
    }).showToast();
}
</script>

<!-- Logout functionality -->
<script>
$(document).ready(function() {
    $('#logoutBtn').on('click', function(e) {
        e.preventDefault();
        
        $.ajax({
            url: '/api/auth/logout',
            type: 'POST',
            success: function(response) {
                if (response.success) {
                    // Clear browser history and prevent back navigation
                    window.history.pushState(null, null, window.location.href);
                    window.onpopstate = function () {
                        window.history.go(1);
                    };
                    
                    // Use replace instead of href to prevent back navigation
                    window.location.replace(response.redirectUrl || '/authentication/signin');
                }
            },
            error: function() {
                // Even if there's an error, redirect to login page
                window.location.replace('/authentication/signin');
            }
        });
    });
});
</script>

